<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kobeer - Kosher Beer Finder</title>

<link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">

<style>
:root {
    --google-blue: #1a73e8;
    --google-amber: #f9ab00;
    --surface: #ffffff;
    --background: #f8f9fa;
    --text-primary: #202124;
    --text-secondary: #5f6368;
    --border: #dadce0;
    --hover-bg: #f1f3f4;
    --shadow-1: 0 1px 2px rgba(60,64,67,.30), 0 1px 3px rgba(60,64,67,.15);
}

* { box-sizing: border-box; }

body {
    font-family: 'Roboto', sans-serif;
    background-color: var(--surface);
    margin: 0;
    display: flex;
    height: 100vh;
    color: var(--text-primary);
}

/* Sidebar */
nav {
    width: 256px;
    background: var(--surface);
    display: flex;
    flex-direction: column;
    padding: 8px;
    border-right: 1px solid var(--border);
}

.logo-area {
    padding: 12px 16px 24px;
    display: flex;
    align-items: center;
    gap: 12px;
    font-family: 'Google Sans', sans-serif;
    font-size: 22px;
    color: var(--text-secondary);
}

.logo-area i {
    color: var(--google-amber);
    font-size: 32px;
}

.nav-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 0 24px;
    height: 48px;
    border-radius: 0 24px 24px 0;
    margin-right: 8px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    transition: background 0.2s;
}

.nav-item:hover { background-color: var(--hover-bg); }

.nav-item.active {
    background-color: #feefc3;
}

main {
    flex-grow: 1;
    overflow-y: auto;
    background-color: var(--background);
    padding: 32px;
}

.top-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 32px;
}

.search-box {
    background: #f1f3f4;
    border-radius: 8px;
    width: 100%;
    max-width: 720px;
    display: flex;
    align-items: center;
    padding: 0 16px;
    height: 48px;
}

.search-box input {
    border: none;
    background: transparent;
    padding: 12px;
    width: 100%;
    font-size: 16px;
    outline: none;
}

.content-grid {
    display: grid;
    grid-template-columns: 1fr 320px;
    gap: 24px;
}

.doc-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    overflow: hidden;
}

.card-header {
    padding: 16px 24px;
    border-bottom: 1px solid var(--border);
    font-family: 'Google Sans', sans-serif;
    font-weight: 500;
}

table {
    width: 100%;
    border-collapse: collapse;
}

th {
    text-align: left;
    font-size: 12px;
    color: var(--text-secondary);
    padding: 12px 24px;
    border-bottom: 1px solid var(--border);
}

td {
    padding: 14px 24px;
    border-bottom: 1px solid var(--border);
    font-size: 14px;
}

/* Form Fields */
.field-container {
    position: relative;
    margin-bottom: 24px;
    width: 100%;
}

.field-container input,
.field-container select {
    width: 100%;
    padding: 16px 12px;
    font-size: 16px;
    border: 1px solid var(--border);
    border-radius: 6px;
    background: transparent;
    outline: none;
    transition: all 0.2s ease;
}

.field-container input:focus,
.field-container select:focus {
    border: 2px solid var(--google-blue);
    box-shadow: 0 0 0 3px rgba(26,115,232,0.15);
}

.field-container label {
    position: absolute;
    left: 12px;
    top: 50%;
    transform: translateY(-50%);
    background: var(--surface);
    padding: 0 4px;
    color: var(--text-secondary);
    font-size: 16px;
    transition: 0.2s;
    pointer-events: none;
}

.field-container input:focus + label,
.field-container input:not(:placeholder-shown) + label {
    top: 0;
    font-size: 12px;
    color: var(--google-blue);
}

.btn-animated {
    background-color: var(--google-blue);
    color: white;
    border: none;
    padding: 10px 24px;
    border-radius: 4px;
    font-weight: 500;
    cursor: pointer;
}

.google-fab {
    position: fixed;
    bottom: 32px;
    right: 32px;
    background: var(--surface);
    border-radius: 16px;
    padding: 16px 24px;
    display: flex;
    align-items: center;
    gap: 12px;
    box-shadow: var(--shadow-1);
    cursor: pointer;
}

.modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(32,33,36,0.6);
    display: none;
    justify-content: center;
    align-items: center;
}

.modal-content {
    background: var(--surface);
    width: 448px;
    border-radius: 8px;
    padding: 24px;
}
</style>
</head>

<body>

<nav>
    <div class="logo-area">
        <i class="material-icons-outlined">local_drink</i>
        <span>Kobeer</span>
    </div>
    <div class="nav-item active">Dashboard</div>
    <div class="nav-item" id="login-btn">
        <i class="material-icons-outlined">account_circle</i>
        <span>Login</span>
    </div>
    <div class="nav-item" id="logout-btn" style="display:none;">
        <i class="material-icons-outlined">logout</i>
        Logout
    </div>
</nav>

<main>
    <div class="top-bar">
        <div class="search-box">
            <i class="material-icons-outlined" style="color: var(--text-secondary)">search</i>
            <input type="text" placeholder="Search live database...">
        </div>
    </div>

    <div class="content-grid">
        <div class="doc-card">
            <div class="card-header">Live Database</div>
            <table>
                <thead>
                    <tr>
                        <th>BEER NAME</th>
                        <th>BREWERY</th>
                        <th>TYPE</th>
                        <th>STATUS</th>
                    </tr>
                </thead>
                <tbody id="beerTableBody"></tbody>
            </table>
        </div>

        <div class="doc-card">
            <div class="card-header">Ingredient Rules</div>
            <div style="padding:16px; font-size:13px; color:var(--text-secondary)">
                Standard beers are generally kosher.
            </div>
        </div>
    </div>
</main>

<div class="google-fab" id="openModal">
    <i class="material-icons-outlined">add</i>
    Submit Beer
</div>

<div class="modal-overlay" id="modal">
    <div class="modal-content">
        <h2 style="font-family:'Google Sans'; font-weight:400;">Add to database</h2>

        <div class="field-container">
            <input type="text" id="beerName" placeholder=" ">
            <label>Beer Name</label>
        </div>

        <div class="field-container">
            <input type="text" id="brewery" placeholder=" ">
            <label>Brewery Name</label>
        </div>

        <div class="field-container">
            <select id="beerType">
                <option value="Lager">Lager</option>
                <option value="IPA">IPA</option>
                <option value="Stout">Stout</option>
            </select>
        </div>

        <div style="display:flex; justify-content:flex-end; gap:8px;">
            <button class="btn-animated" style="background:transparent;color:var(--google-blue)" id="closeModal">Cancel</button>
            <button class="btn-animated" id="submitBeer">Submit</button>
        </div>
    </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
import { getFirestore, collection, addDoc, onSnapshot, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "kobeer-dcead.firebaseapp.com",
    projectId: "kobeer-dcead",
    storageBucket: "kobeer-dcead.firebasestorage.app",
    messagingSenderId: "238456060030",
    appId: "1:238456060030:web:7b94ef9094f16d17ab002f"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);
const provider = new GoogleAuthProvider();

const beersCol = collection(db, "beers");
const beerTableBody = document.getElementById("beerTableBody");
const modal = document.getElementById("modal");

document.getElementById("login-btn").onclick = () => signInWithPopup(auth, provider);
document.getElementById("logout-btn").onclick = () => signOut(auth);

onAuthStateChanged(auth, user => {
    document.getElementById("logout-btn").style.display = user ? "flex" : "none";
});

onSnapshot(beersCol, snapshot => {
    beerTableBody.innerHTML = "";
    snapshot.forEach(doc => {
        const beer = doc.data();
        beerTableBody.innerHTML += `
            <tr>
                <td>${beer.name}</td>
                <td>${beer.brewery}</td>
                <td>${beer.type}</td>
                <td style="color:var(--google-blue);font-weight:500;">Pending</td>
            </tr>
        `;
    });
});

document.getElementById("submitBeer").onclick = async () => {
    if (!auth.currentUser) return alert("Please login first");

    await addDoc(beersCol, {
        name: beerName.value,
        brewery: brewery.value,
        type: beerType.value,
        createdAt: serverTimestamp(),
        userId: auth.currentUser.uid
    });

    modal.style.display = "none";
};

openModal.onclick = () => modal.style.display = "flex";
closeModal.onclick = () => modal.style.display = "none";
</script>

</body>
</html>
